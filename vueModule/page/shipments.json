{
  "layout": "MainLayout",
  "components": [
    {
      "is": "TableTool",
      "props": {
        "reportingKey": "shipments",
        "jql": "shipments",
        "urlFormat": "/shipments{{ id|if('/', '') }}{{ id }}",
        "hasReports": true,
        "showFilterBar": true,
        "enableShare": true,
        "enableSetting": true,
        "newReport": {
          "configurations": {
            "i18nContext": "Reporting",
            "clickable": true,
            "draggable": true,
            "sorting": {},
            "pagination": {
              "current": 0,
              "perPage": 20
            }
          }
        },
        "fieldOptions": [
          {
            "key": "id",
            "hidden": true
          },
          {
            "key": "jobDate",
            "datetime": "YYYY-MM-DD"
          }
        ],
        "filters": [
          {
            "name": "moduleType",
            "type": "list",
            "props": {
              "jql": {
                "$select": [
                  {
                    "expression": { "classname": "ColumnExpression", "name": "code" },
                    "$as": "value"
                  },
                  {
                    "expression": { "classname": "ColumnExpression", "name": "name" },
                    "$as": "label"
                  }
                ],
                "$from": {
                  "table": {
                    "method": "POST",
                    "url": "api/code/query/code_master",
                    "columns": [
                      { "name": "code", "type": "string" },
                      { "name": "name", "type": "string" }
                    ],
                    "data": {
                      "subqueries": {
                        "codeType": {
                          "value": "moduleType"
                        }
                      }
                    }
                  },
                  "$as": "code"
                }
              },
              "resolveJql": {
                "$select": [
                  {
                    "expression": { "classname": "ColumnExpression", "name": "code" },
                    "$as": "value"
                  },
                  {
                    "expression": { "classname": "ColumnExpression", "name": "name" },
                    "$as": "label"
                  }
                ],
                "$from": {
                  "table": {
                    "method": "POST",
                    "url": "api/code/query/code_master",
                    "columns": [
                      { "name": "code", "type": "string" },
                      { "name": "name", "type": "string" }
                    ],
                    "data": {
                      "subqueries": {
                        "codeType": {
                          "value": "moduleType"
                        },
                        "code": {
                          "value": "{{ value }}"
                        }
                      }
                    }
                  },
                  "$as": "code"
                }
              }
            }
          },
          {
            "name": "salesmanCode",
            "type": "text"
          },
          {
            "name": "date",
            "type": "date",
            "props": {
              "required": true,
              "shortcuts": [
                {
                  "label": "year-to-date",
                  "func": "year-to-date"
                },
                {
                  "label": "current",
                  "shortcuts": [
                    {
                      "label": "current year",
                      "func": {
                        "key": "current",
                        "args": { "unit": "year" }
                      }
                    },
                    {
                      "label": "current month",
                      "func": {
                        "key": "current",
                        "args": { "unit": "month" }
                      }
                    }
                  ]
                },
                {
                  "label": "last",
                  "shortcuts": [
                    {
                      "label": "last year",
                      "func": {
                        "key": "last",
                        "args": { "unit": "year" }
                      }
                    },
                    {
                      "label": "last 3 month",
                      "func": {
                        "key": "last",
                        "args": { "value": 3, "unit": "month" }
                      }
                    }
                  ]
                },
                {
                  "label": "coming",
                  "shortcuts": [
                    {
                      "label": "coming 7 days",
                      "func": {
                        "key": "coming",
                        "args": { "value": 7, "unit": "day", "startFromNow": true }
                      }
                    }
                  ]
                },
                {
                  "label": "past",
                  "shortcuts": [
                    {
                      "label": "past 7 days",
                      "func": {
                        "key": "past",
                        "args": { "value": 7, "unit": "day" }
                      }
                    }
                  ]
                }
              ]
            }
          },
          {
            "name": "Airline",
            "type": "autocomplete",
            "props": {
              "jql": {
                "$select": [
                  {
                    "expression": { "classname": "ColumnExpression", "name": "code" },
                    "$as": "value"
                  },
                  {
                    "expression": { "classname": "ColumnExpression", "name": "name" },
                    "$as": "label"
                  }
                ],
                "$from": {
                  "table": {
                    "method": "POST",
                    "url": "api/code/query/code_master",
                    "columns": [
                      { "name": "code", "type": "string" },
                      { "name": "name", "type": "string" }
                    ],
                    "data": {
                      "subqueries": {
                        "codeType": {
                          "value": "airline"
                        },
                        "q": {
                          "value": "{{ q }}"
                        }
                      }
                    }
                  },
                  "$as": "code"
                }
              },
              "resolveJql": {
                "$select": [
                  {
                    "expression": { "classname": "ColumnExpression", "name": "code" },
                    "$as": "value"
                  },
                  {
                    "expression": { "classname": "ColumnExpression", "name": "name" },
                    "$as": "label"
                  }
                ],
                "$from": {
                  "table": {
                    "method": "POST",
                    "url": "api/code/query/code_master",
                    "columns": [
                      { "name": "code", "type": "string" },
                      { "name": "name", "type": "string" }
                    ],
                    "data": {
                      "subqueries": {
                        "codeType": {
                          "value": "airline"
                        },
                        "code": {
                          "value": "{{ value }}"
                        }
                      }
                    }
                  },
                  "$as": "code"
                }
              },
              "display": "value",
              "multi": true
            }
          }
        ]
      }
    }
  ]
}
