{
  "components": [{
    "is": "WidgetMoreForm",
    "props": {
      "name": "shipmentParty",
      "mainKey": "Party",
      "formProps": {
        "z": {
          "class": "xs-12 md-6 padding-leftright-4"
        }
      },
      "labelProps": {
        "z": {
          "isComponent": "v-label",
          "i18nContext": "Widget",
          "class": "font-110"
        },
        "shipper": {
          "class": "font-110 teal--text required form-label"
        },
        "consignee": {
          "class": "font-110 green--text required form-label"
        },
        "office": {
          "class": "font-110 blue--text"
        },
        "agent": {
          "class": "font-110 purple--text"
        },
        "linerAgent": {
          "class": "font-110 amber--text"
        },
        "roAgent": {
          "class": "font-110 brown--text"
        },
        "controllingCustomer": {
          "class": "font-110 orange--text"
        },
        "notifyParty": {
          "class": "font-110 pink--text"
        }
      },
      "fieldProps": {
        "z": {
          "thirdPartyCode.erp": "{{thirdPartyCode.erp}}",
          "id": "{{id}}",
          "name": "{{name}}",
          "address": "{{address}}",
          "cityCode": "{{cityCode}}",
          "countryCode": "{{countryCode}}",
          "zip": "{{zip}}",
          "shortName": "{{shortName}}",
          "fixValue": "{{fixValue}}"
        }
      },
      "fixedKeys": [
        "shipper",
        "consignee",
        "agent",
        "office",
        "roAgent",
        "linerAgent",
        "controllingCustomer",
        "notifyParty"
      ],
      "alwaysShowKeys": [
        "shipper",
        "consignee",
        "agent",
        "office",
        "roAgent",
        "linerAgent",
        "controllingCustomer",
        "notifyParty"
      ],
      "canAdd": true,
      "canAddProps": {
        "class": "xs-12 md-6 padding-20 min-height-200 margin-auto"
      },
      "addItemsOrFunc": ["Trucker", "Broker", "Factory", "Warehouse"],
      "fields": [{
        "name": ["shipmentParty.{{flex}}{{key}}PartyName", "shipmentParty.{{flex}}{{key}}Party.name"],
        "component": "v-text-field",
        "class": "xs-12 md-12"
      }],
      "hiddenFieldsProps": {
        "style": {
          "width": "500px",
          "max-width": "100%",
          "z-index": 1
        }
      },
      "hiddenFields": [{
          "name": "shipmentParty.{{flex}}{{key}}PartyName",
          "component": "v-text-field",
          "class": "xs-12 md-8"
        },
        {
          "label": "Widget.shortName",
          "name": "shipmentParty.{{flex}}{{key}}Party.shortName",
          "component": "v-text-field",
          "class": "xs-12 md-4"
        },
        {
          "label": "Widget.contactName",
          "name": "shipmentParty.{{flex}}{{key}}PartyContactName",
          "component": "v-text-field",
          "class": "xs-12 md-12",
          "checkDisplayWhen": "return form && form.shipmentParty && form.shipmentParty.{{flex}}{{key}}PartyContactName"
        },
        {
          "label": "Widget.contactEmail",
          "name": "shipmentParty.{{flex}}{{key}}PartyContactEmail",
          "component": "v-text-field",
          "class": "xs-12 md-12",
          "readonlyClass": "xs-10 md-10",
          "checkDisplayWhen": "return form && form.shipmentParty && form.shipmentParty.{{flex}}{{key}}PartyContactEmail"
        },
        {
          "label": "Widget.inviteEmail",
          "name": "{{flex}}{{key}}PartyContactEmail",
          "checkDisplayWhen": "return form && form.shipmentParty && form.shipmentParty.{{flex}}{{key}}PartyContactEmail",
          "component": "button-field",
          "class": "hidden",
          "readonlyClass": "xs-2",
          "slots": [{
            "is": "Icon",
            "props": {
              "icon": "email"
            }
          }],
          "props": {

            "flat": true,
            "icon": true,
            "events": {
              "click.stop": [{
                "type": "axios",
                "otherParams": {
                  "axiosParams": {
                    "url": "/api/invitation/invite/invite",
                    "method": "POST",
                    "data": {
                      "entityId": "{{context.$store.state.widget.id}}",
                      "tableName": "booking",
                      "partyId": ["{{ '`${args[0]}${args[1]}PartyId`'  | calculate(flex,key) | getFrom(context.$store.state.widget.data)}}"],
                      "partyType": ["{{key}}"],
                      "person": {
                        "userName": "{{ context.fixValue }}"
                      }
                    }
                  }
                },

                "afterActions": [{
                  "type": "notify",
                  "otherParams": {
                    "notification": "invite success"
                  }
                }]
              }]


            }


          }
        },
        {
          "label": "Widget.contactPhone",
          "name": "shipmentParty.{{flex}}{{key}}PartyContactPhone",
          "component": "v-text-field",
          "class": "xs-12 md-12",
          "checkDisplayWhen": "return form && form.shipmentParty && form.shipmentParty.{{flex}}{{key}}PartyContactPhone"
        },
        {
          "name": "shipmentParty.{{flex}}{{key}}PartyContacts",
          "checkDisplayWhen": "return form && form.shipmentParty && form.shipmentParty.{{flex}}{{key}}PartyContacts && form.shipmentParty.{{flex}}{{key}}PartyContacts.length > 0",
          "component": "GridField",
          "class": "xs-12",
          "readonlyClass": "xs-12",
          "props": {
            "overrideRowIndex": 1,
            "fields": [{
                "label": "Widget.contactXName",
                "name": "Name",
                "component": "v-text-field",
                "class": "xs-12 md-12",
                "readonlyClass": "xs-12 md-12"
              },
              {
                "label": "Widget.contactXEmail",
                "name": "Email",
                "component": "v-text-field",
                "class": "xs-12 md-12",
                "readonlyClass": "xs-10 md-10"
              },
              {
                "label": "Widget.inviteEmail",
                "checkDisplayWhen": "return form.Email",
                "name": "Email",
                "component": "button-field",
                "class": "hidden",
                "readonlyClass": "xs-2 md-2",
                "slots": [{
                  "is": "Icon",
                  "props": {
                    "icon": "email"
                  }
                }],
                "props": {

                  "flat": true,
                  "icon": true,
                  "events": {
                    "click.stop": [{
                      "type": "axios",
                      "otherParams": {
                        "axiosParams": {
                          "url": "/api/invitation/invite/invite",
                          "method": "POST",
                          "data": {
                            "entityId": "{{context.$store.state.widget.id}}",
                            "tableName": "booking",
                            "partyId": ["{{ '`${args[0]}${args[1]}PartyId`'  | calculate(flex,key) | getFrom(context.$store.state.widget.data)}}"],
                            "partyType": ["{{key}}"],
                            "person": {
                              "userName": "{{ context.fixValue }}"
                            }
                          }
                        }
                      },

                      "afterActions": [{
                        "type": "notify",
                        "otherParams": {
                          "notification": "invite success"
                        }
                      }]
                    }]


                  }


                }
              },
              {
                "label": "Widget.contactXPhone",
                "name": "Phone",
                "component": "v-text-field",
                "class": "xs-12 md-12",
                "_readonlyClass": "xs-12 md-12"
              }
            ]
          }
        },
        {
          "label": "Widget.contactAddress",
          "name": ["shipmentParty.{{flex}}{{key}}PartyAddress", "shipmentParty.{{flex}}{{key}}Party.address"],
          "component": "v-textarea",
          "props": {
            "auto-grow": true,
            "rows": 5
          },
          "class": "xs-12 md-12",
          "checkDisplayWhen": "return form && form.shipmentParty && (form.shipmentParty.{{flex}}{{key}}PartyAddress || shipmentParty.{{flex}}{{key}}Party.address)"
        },
        {
          "label": "Widget.cityCode",
          "name": ["shipmentParty.{{flex}}{{key}}PartyCityCode", "shipmentParty.{{flex}}{{key}}Party.cityCode"],
          "component": "v-text-field",
          "class": "xs-12 md-12",
          "checkDisplayWhen": "return form && form.shipmentParty && (form.shipmentParty.{{flex}}{{key}}PartyCityCode || shipmentParty.{{flex}}{{key}}Party.cityCode)"
        },
        {
          "label": "Widget.stateCode",
          "name": ["shipmentParty.{{flex}}{{key}}PartyStateCode", "shipmentParty.{{flex}}{{key}}Party.stateCode"],
          "component": "v-text-field",
          "class": "xs-12 md-12",
          "checkDisplayWhen": "return form && form.shipmentParty && (form.shipmentParty.{{flex}}{{key}}PartyStateCode || shipmentParty.{{flex}}{{key}}Party.stateCode)"
        },
        {
          "label": "Widget.countryCode",
          "name": ["shipmentParty.{{flex}}{{key}}PartyCountryCode", "shipmentParty.{{flex}}{{key}}Party.countryCode"],
          "component": "v-text-field",
          "class": "xs-12 md-12",
          "checkDisplayWhen": "return form && form.shipmentParty && (form.shipmentParty.{{flex}}{{key}}PartyCountryCode || shipmentParty.{{flex}}{{key}}Party.countryCode)"
        },
        {
          "label": "Widget.zip",
          "name": ["shipmentParty.{{flex}}{{key}}PartyZip", "shipmentParty.{{flex}}{{key}}Party.zip"],
          "component": "v-text-field",
          "class": "xs-12 md-6",
          "checkDisplayWhen": "return form && form.shipmentParty && (form.shipmentParty.{{flex}}{{key}}PartyZip || shipmentParty.{{flex}}{{key}}Party.zip)",
          "readonlyClass": "xs-12"
        }
      ]
    }
  }]
}
