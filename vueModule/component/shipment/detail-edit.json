{
  "class": "grid",
  "components": [{
      "is": "DynamicComponent",
      "props": {
        "class": "xs-12 grid min-height-28 align-item-center full-width padding-2",
        "components": [
          {
            "is": "v-btn",
            "props": {
              "small": true,
              "flat": true,
              "icon": true
            },
            "slots": [{
              "is": "Icon",
              "props": {
                "icon": "arrow_back"
              }
            }],
            "events": {
              "click.stop": [{
                "type": "router",
                "otherParams": {
                  "func": "push",
                  "path": "/{{ p[0] }}/{{ p[1] }}"
                }
              }]
            }
          },
          {
            "is": "I18nText",
            "props": {
              "i18nContext": "ShipmentPage",
              "i18nKey": "title",
              "i18nOptions": {
                "title": "{{context.$store.state.widget.data.houseNo}}"
              }
            }
          },
          {
            "is": "v-spacer"
          },
          {
            "is": "ToolTip",
            "props": {
              "bottom": true,
              "activatorComponents": {
                "layout": "span",
                "components": [{
                  "is": "v-btn",
                  "props": {
                    "small": true,
                    "icon": true,
                    "flat": true
                  },
                  "slots": [{
                    "is": "Icon",
                    "props": {
                      "icon": "map"
                    }
                  }],
                  "events": {
                    "click.stop": [{
                      "type": "dispatch",
                      "otherParams": {
                        "name": "widget/changeMode",
                        "mode": "map"
                      }
                    }]
                  }
                }]
              },
              "mainComponents": {
                "layout": "span",
                "components": [{
                  "is": "I18nText",
                  "props": {
                    "i18nContext": "ShipmentPage",
                    "i18nKey": "map"
                  }
                }]
              }
            }
          },
          {
            "is": "ToolTip",
            "props": {
              "bottom": true,
              "activatorComponents": {
                "layout": "span",
                "components": [{
                  "is": "BookmarkButton",
                  "props": {
                    "entity": "shipment",
                    "small": true,
                    "icon": true,
                    "flat": true
                  }
                }]
              },
              "mainComponents": {
                "layout": "span",
                "components": [{
                  "is": "I18nText",
                  "props": {
                    "i18nContext": "ShipmentPage",
                    "i18nKey": "bookmark"
                  }
                }]
              }
            }
          }
        ]
      }
    },
    {
      "is": "WidgetTab",
      "if": "return !context.$vuetify.breakpoint.mdAndUp",
      "props": {
        "show-arrows": true,
        "tabComponents": [{
            "index": "general",
            "tabComponents": [{
              "is": "i18nText",
              "props": {
                "i18nContext": "ShipmentPage",
                "i18nKey": "General"
              }
            }],
            "tabItemComponents": [{
                "is": "AsyncComponent",
                "props": {
                  "getDate": "shipmentDate",
                  "class": "xs-12 margin-topbottom-4",
                  "layoutName": "plugins/tracking",
                  "loadWhenDataLoaded": true,
                  "axiosBaseParams": [
                    "const trackingNos = [];",
                    "const data = context.$store.state.widget.data;",
                    "if (data.masterNo) { trackingNos.push(data.masterNo) }",
                    "if (data.shipmentContainers && data.shipmentContainers.length > 0) {",
                    "for (const container of data.shipmentContainers) {",
                    "if (container.carrierBookingNo) { trackingNos.push(container.carrierBookingNo) }",
                    "if (container.containerNo) { trackingNos.push(container.containerNo) }",
                    "}",
                    "}",
                    "return {",
                    "url: 'api/swivel-tracking/get',",
                    "method: 'POST',",
                    "data: { trackingNos }",
                    "};"
                  ],
                  "createdAtKey": "issueDate",
                  "createI18nKey": "shipmentReceivedByForwarder"
                }
              },
              {
                "is": "v-card",
                "slots": [{
                  "is": "AsyncComponent",
                  "props": {
                    "layoutName": "shipment/forms/generalForm"
                  }
                }]
              },
              {
                "is": "v-card",
                "slots": [{
                  "is": "AsyncComponent",
                  "props": {
                    "layoutName": "shipment/forms/containerForm"
                  }
                }]
              }
            ]
          },
          {
            "index": "partyAndDate",
            "tabComponents": [{
              "is": "I18nText",
              "props": {
                "i18nContext": "ShipmentPage",
                "i18nKey": "partyAndDate"
              }
            }],
            "tabItemComponents": [{
                "is": "v-card",
                "slots": [{
                  "is": "AsyncComponent",
                  "props": {
                    "layoutName": "shipment/forms/partyForm"
                  }
                }]
              },
              {
                "is": "v-card",
                "slots": [{
                  "is": "AsyncComponent",
                  "props": {
                    "layoutName": "shipment/forms/dateForm"
                  }
                }]
              }
            ]
          },
          {
            "index": "alertAndDocument",
            "tabComponents": [{
              "is": "I18nText",
              "props": {
                "i18nContext": "ShipmentPage",
                "i18nKey": "alertAndDocument"
              }
            }],
            "tabItemComponents": [{
                "is": "AsyncComponent",
                "props": {
                  "class": "xs-12 margin-topbottom-4",
                  "layoutName": "plugins/alert",
                  "axiosBaseParams": [
                    "return {",
                    "url: 'api/alert/list/history',",
                    "method: 'POST',",
                    "data: {",
                    "tableName: 'shipment',",
                    "primaryKey: context.$route.params.params,",
                    "}",
                    "};"
                  ],
                  "sendMessageAxiosParams": [
                    "const primaryKey = encodeURIComponent(context.$route.params.params);",
                    "return {",
                    "url: `api/alert/message/shipment/${primaryKey}`,",
                    "method: 'POST',",
                    "data: { message: swig.message }",
                    "};"
                  ]
                }
              },
              {
                "is": "AsyncComponent",
                "props": {
                  "class": "xs-12 margin-topbottom-4",
                  "layoutName": "plugins/document",
                  "axiosBaseParams": [
                    "const primaryKey = context.$route.params.params;",
                    "return {",
                    "url: 'api/document/document/shipment/{{primaryKey}}'.format({ primaryKey }),",
                    "};"
                  ],
                  "uploadAxiosParams": [
                    "const primaryKey = encodeURIComponent(context.$route.params.params);",
                    "return {",
                    "method: 'POST',",
                    "url: 'api/document/document/upload',",
                    "data: {",
                    "tableName: 'shipment', primaryKey,",
                    "fileName: swig.fileName,",
                    "fileData: { base64String: swig.base64String, extension: swig.extension }",
                    "}",
                    "};"
                  ],
                  "downloadAxiosParams": [
                    "const primaryKey = encodeURIComponent(context.$route.params.params);",
                    "return {",
                    "responseType: 'blob',",
                    "method: 'POST',",
                    "url: 'api/document/document/download',",
                    "data: {tableName: 'shipment', primaryKey, fileName: swig.fileName}",
                    "}"
                  ],
                  "deleteAxiosParams": [
                    "const primaryKey = encodeURIComponent(context.$route.params.params);",
                    "return {",
                    "method: 'POST',",
                    "url: 'api/document/document/delete',",
                    "data: {tableName: 'shipment', primaryKey, fileName: swig.fileName}",
                    "}"
                  ]
                }
              }
            ]
          }
        ]
      }
    },
    {
      "is": "DynamicComponent",
      "if": "return context.$vuetify.breakpoint.mdAndUp",
      "props": {
        "class": "xs-12 grid full-width padding-2",
        "components": [
          {
            "is": "DynamicComponent",
            "props": {
              "class": "xs-8 grid padding-2",
              "components": [
                {
                  "is": "DynamicComponent",
                  "props": {
                    "class": "xs-12 grid",
                    "components": [
                      {
                        "is": "AsyncComponent",
                        "props": {
                          "class": "xs-6",
                          "layoutName": "shipment/forms/party"
                        }
                      },
                      {
                        "is": "AsyncComponent",
                        "props": {
                          "class": "xs-6",
                          "layoutName": "shipment/forms/date"
                        }
                      }
                    ]
                  }
                },
                {
                  "is": "AsyncComponent",
                  "props": {
                    "class": "xs-6",
                    "layoutName": "shipment/forms/general"
                  }
                },
                {
                  "is": "AsyncComponent",
                  "props": {
                    "class": "xs-6",
                    "layoutName": "shipment/forms/container"
                  }
                },
                {
                  "is": "AsyncComponent",
                  "props": {
                    "class": "xs-6",
                    "layoutName": "shipment/forms/reference"
                  }
                }
              ]
            }
          }, {
            "is": "DynamicComponent",
            "props": {
              "class": "xs-4 padding-2 grid",
              "components": [
                {
                  "is": "AsyncComponent",
                  "props": {
                    "getDate": "shipmentDate",
                    "class": "xs-12 margin-topbottom-2",
                    "layoutName": "plugins/tracking",
                    "loadWhenDataLoaded": true,
                    "axiosBaseParams": [
                      "const trackingNos = [];",
                      "const data = context.$store.state.widget.data;",
                      "if (data.masterNo) { trackingNos.push(data.masterNo) }",
                      "if (data.shipmentContainers && data.shipmentContainers.length > 0) {",
                      "for (const container of data.shipmentContainers) {",
                      "if (container.carrierBookingNo) { trackingNos.push(container.carrierBookingNo) }",
                      "if (container.containerNo) { trackingNos.push(container.containerNo) }",
                      "}",
                      "}",
                      "return {",
                      "url: 'api/swivel-tracking/get',",
                      "method: 'POST',",
                      "data: { trackingNos }",
                      "};"
                    ],
                    "createdAtKey": "issueDate",
                    "createI18nKey": "shipmentReceivedByForwarder"
                  }
                },
                {
                  "is": "AsyncComponent",
                  "props": {
                    "class": "xs-12 margin-topbottom-2",
                    "layoutName": "plugins/alert",
                    "axiosBaseParams": [
                      "return {",
                      "url: 'api/alert/list/history',",
                      "method: 'POST',",
                      "data: {",
                      "tableName: 'shipment',",
                      "primaryKey: context.$route.params.params,",
                      "}",
                      "};"
                    ],
                    "sendMessageAxiosParams": [
                      "const primaryKey = encodeURIComponent(context.$route.params.params);",
                      "return {",
                      "url: `api/alert/message/shipment/${primaryKey}`,",
                      "method: 'POST',",
                      "data: { message: swig.message }",
                      "};"
                    ]
                  }
                },
                {
                  "is": "AsyncComponent",
                  "props": {
                    "class": "xs-12 margin-topbottom-2",
                    "layoutName": "plugins/document",
                    "axiosBaseParams": [
                      "const primaryKey = context.$route.params.params;",
                      "return {",
                      "url: 'api/document/document/shipment/{{primaryKey}}'.format({ primaryKey }),",
                      "};"
                    ],
                    "uploadAxiosParams": [
                      "const primaryKey = encodeURIComponent(context.$route.params.params);",
                      "return {",
                      "method: 'POST',",
                      "url: 'api/document/document/upload',",
                      "data: {",
                      "tableName: 'shipment', primaryKey,",
                      "fileName: swig.fileName,",
                      "fileData: { base64String: swig.base64String, extension: swig.extension }",
                      "}",
                      "};"
                    ],
                    "downloadAxiosParams": [
                      "const primaryKey = encodeURIComponent(context.$route.params.params);",
                      "return {",
                      "responseType: 'blob',",
                      "method: 'POST',",
                      "url: 'api/document/document/download',",
                      "data: {tableName: 'shipment', primaryKey, fileName: swig.fileName}",
                      "}"
                    ],
                    "deleteAxiosParams": [
                      "const primaryKey = encodeURIComponent(context.$route.params.params);",
                      "return {",
                      "method: 'POST',",
                      "url: 'api/document/document/delete',",
                      "data: {tableName: 'shipment', primaryKey, fileName: swig.fileName}",
                      "}"
                    ]
                  }
                }
              ]
            }
          }
        ]
      }
    }
  ]
}
